var q=Object.create;var g=Object.defineProperty;var D=Object.getOwnPropertyDescriptor;var L=Object.getOwnPropertyNames,E=Object.getOwnPropertySymbols,Q=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var $=(o,e,r)=>e in o?g(o,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[e]=r,w=(o,e)=>{for(var r in e||(e={}))b.call(e,r)&&$(o,r,e[r]);if(E)for(var r of E(e))z.call(e,r)&&$(o,r,e[r]);return o};var U=(o,e,r,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of L(e))!b.call(o,s)&&s!==r&&g(o,s,{get:()=>e[s],enumerable:!(t=D(e,s))||t.enumerable});return o};var l=(o,e,r)=>(r=o!=null?q(Q(o)):{},U(e||!o||!o.__esModule?g(r,"default",{value:o,enumerable:!0}):r,o));var n=(o,e,r)=>new Promise((t,s)=>{var k=c=>{try{u(r.next(c))}catch(d){s(d)}},H=c=>{try{u(r.throw(c))}catch(d){s(d)}},u=c=>c.done?t(c.value):Promise.resolve(c.value).then(k,H);u((r=r.apply(o,e)).next())});var M=l(require("net"));var f=l(require("winston")),S=l(require("kleur")),V=new f.default.Logger({level:"error",exitOnError:!1,transports:[new f.default.transports.Console({handleExceptions:!0,format:f.default.format.printf(({level:o,message:e})=>`${S.default.red(`[SMART_HOME] -> [${o.toUpperCase()}]`)} ${S.default.red(e)}`)})]}),O=V;var p=l(require("winston")),v=l(require("kleur")),j=new p.default.Logger({level:"info",exitOnError:!1,transports:[new p.default.transports.Console({handleExceptions:!0,format:p.default.format.printf(({level:o,message:e})=>`${v.default.blue(`[SMART_HOME] - ${new Date(Date.now()).toString()} -> [${o.toUpperCase()}]`)} ${v.default.blue(e)}`)})]}),x=j;var B={info:function(o){return x.log("info",o)},err:function(o){return O.log("error",o)}},m=B;var y=require("os");function a(){let o=(0,y.networkInterfaces)();for(let e in o){let r=o[e];for(let t of r)if(t.family==="IPv4"&&t.internal===!1)return t.address}return null}function T(o,e){return n(this,null,function*(){let r=new M.Server({},t=>n(this,null,function*(){t.on("data",s=>n(this,null,function*(){}))}));process.on("SIGINT",()=>{r.close()}),r.listen(o||5500,e||"0.0.0.0",()=>{m.info(`TCP Server Success Run , Host: ${a()}, Port: ${o}`)})})}var C=require("net");var I=l(require("aedes"));var h={authenticate:function(o,e,r,t){return n(this,null,function*(){t(null,!0)})},authorizePublish:function(o,e,r){return n(this,null,function*(){r(null)})},authorizeSubscribe:function(o,e,r){return n(this,null,function*(){r(null,e)})}};var i=new I.default(w({},h));i.on("subscribe",(o,e)=>{});i.on("unsubscribe",(o,e)=>{console.group(`id:${e.id}`),console.table(o),console.groupEnd()});i.on("publish",(o,e)=>{o.payload=Buffer.from(JSON.stringify({name:"Aldo Ratmawan"}))});i.on("clientDisconnect",o=>{console.log(`client id:${o.id} disconnected`)});i.on("clientError",(o,e)=>{console.log(`client id:${o.id} error:${e.message}`)});i.on("clientReady",o=>{console.log(`client id:${o.id} clientReady`)});i.on("connectionError",o=>{o.close(),console.log(`client error: ${o.id}`)});var P=i;function G(o,e){return n(this,null,function*(){(0,C.createServer)(P.handle).listen(o,e,()=>{m.info(`Mqtt Server Success Run , Host: ${a()}, Port: ${o}`)})})}var R=G;var A=require("dotenv"),_=require("path"),J=process.env.NODE_ENV||"dev.env",F=()=>{(0,A.config)({path:(0,_.resolve)(process.cwd(),J)})},N=F;var K=8500,W="0.0.0.0",X=8501,Y="0.0.0.0";N();function Z(){return n(this,null,function*(){Promise.allSettled([R(K,W),T(X,Y)])})}Z();
//# sourceMappingURL=index.js.map