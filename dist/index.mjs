import{a,b as n,c as i,d as f}from"./chunk-PW5L7S46.mjs";import*as m from"net";import{networkInterfaces as S}from"os";function s(){let e=S();for(let o in e){let t=e[o];for(let c of t)if(c.family==="IPv4"&&c.internal===!1)return c.address}return null}function l(e,o){return n(this,null,function*(){let t=new m.Server({},c=>n(this,null,function*(){c.on("data",I=>n(this,null,function*(){}))}));process.on("SIGINT",()=>{t.close()}),t.listen(e||5500,o||"0.0.0.0",()=>{i.info(`TCP Server Success Run , Host: ${s()}, Port: ${e}`)})})}import{createServer as T}from"net";import g from"aedes";var u={authenticate:function(e,o,t,c){return n(this,null,function*(){c(null,!0)})},authorizePublish:function(e,o,t){return n(this,null,function*(){t(null)})},authorizeSubscribe:function(e,o,t){return n(this,null,function*(){t(null,o)})}};var r=new g(a({},u));r.on("subscribe",(e,o)=>{});r.on("unsubscribe",(e,o)=>{console.group(`id:${o.id}`),console.table(e),console.groupEnd()});r.on("publish",(e,o)=>{e.payload=Buffer.from(JSON.stringify({name:"Aldo Ratmawan"}))});r.on("clientDisconnect",e=>{console.log(`client id:${e.id} disconnected`)});r.on("clientError",(e,o)=>{console.log(`client id:${e.id} error:${o.message}`)});r.on("clientReady",e=>{console.log(`client id:${e.id} clientReady`)});r.on("connectionError",e=>{e.close(),console.log(`client error: ${e.id}`)});var p=r;function v(e,o){return n(this,null,function*(){T(p.handle).listen(e,o,()=>{i.info(`Mqtt Server Success Run , Host: ${s()}, Port: ${e}`)})})}var d=v;var b=8500,y="0.0.0.0",P=8501,$="0.0.0.0";f();function O(){return n(this,null,function*(){Promise.allSettled([d(b,y),l(P,$)])})}O();
//# sourceMappingURL=index.mjs.map